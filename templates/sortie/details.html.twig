{% extends 'base.html.twig' %}

{% block title %}
    Sortie : {{ sortie.nom }} | {{ parent() }}
{% endblock %}


{% block body %}
    <h2>Afficher une sortie</h2>
    <div>
        <table class="tableSortie">
        <tr>
            <th>Nom de la sortie : </th>
            <td>{{ sortie.nom }}</td>
            <th>Campus : </th>
            <td>{{ sortie.campus.nom }}</td>
        </tr>
        <tr>
            <th>Date et heure de la sortie : </th>
            <td>{{ sortie.dateHeureDebut.format('d/m/Y H:i')}}</td>
            <th>Lieu : </th>
            <td>{{ sortie.lieu.nom}}</td>
        </tr>
        <tr>
            <th>Date limite d'inscription :  </th>
            <td>{{ sortie.dateLimiteInscription.format('d/m/Y')}}</td>
            <th>Rue : </th>
            <td>{{ sortie.lieu.rue}}</td>
        </tr>
        <tr>
            <th>Nombre de places :  </th>
            <td>{{ sortie.nbInscriptionsMax}}</td>
            <th>Code postal : </th>
            <td>{{ sortie.lieu.ville.codePostal}} {{ sortie.lieu.ville.nom }}</td>
        </tr>
        <tr>
            <th>dur√©e :  </th>
            <td>{{ sortie.duree}} minutes</td>
            <th>Latitude : </th>
            <td>{{ sortie.lieu.latitude}}</td>
        </tr>
        <tr>
            <th>description et infos :   </th>
            <td>{{ sortie.infosSortie}}</td>
            <th>Longitude : </th>
            <td>{{ sortie.lieu.longitude}}</td>
        </tr>
    </table>
    </div>
    <br>

    <table>
        <h4>Nom des participants inscrits :</h4>
            <thead>
            <tr>
                <th>Pseudo</th>
                <th>Nom</th>
            </tr>
            </thead>
            <tbody>

{% for partipant in sortie.inscrits %}
            <tr>
                <td> {{ partipant.pseudo}}</td>
                <td>{{ partipant.prenom}} {{ partipant.nom }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    <div>
        {% if app.user and app.user.roles  %}
            <h4>Statut de la sortie : {{ sortie.etat.libelle }}</h4>
                {% if sortie.etat.id == 8 %}
            <div><a href="{{ path('sortie_publier',{'id':sortie.id}) }}" title="publier sortie"><button>Publier la sortie</button></a></div>

 {# TODO: probleme avec delete sortie "App\Entity\Sortie object not found by the @ParamConverter annotation." #}

            <div><a href="{{ path('sortie_delete',{'id':sortie.id}) }}" title="delete sortie"><button>Supprimer sortie</button></a></div>
                {% endif %}
        {% endif %}
    </div>
{% endblock %}



